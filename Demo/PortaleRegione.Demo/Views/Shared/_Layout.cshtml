
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - Demo</title>

    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

    @Styles.Render("~/Content/css")
    @*Import Trumbowyg plugins style...*@
    <link href="~/Content/editor/plugins/table/ui/trumbowyg.table.min.css" rel="stylesheet" />

    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    @Scripts.Render("~/bundles/lib")
    @Scripts.Render("~/bundles/logic")
    <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
    <script src="~/Scripts/moment.js"></script>
    </head>
<body>
<div id="loader-wrapper">
    <div id="loader"></div>
    <div class="loader-section section-left"></div>
    <div class="loader-section section-right"></div>
</div>

<div id="waiting" class="modal" style="height: 120px">
    <div class="modal-content center">
        <div class="preloader-wrapper active">
            <div class="spinner-layer spinner-blue-only">
                <div class="circle-clipper left">
                    <div class="circle"></div>
                </div>
                <div class="gap-patch">
                    <div class="circle"></div>
                </div>
                <div class="circle-clipper right">
                    <div class="circle"></div>
                </div>
            </div>
        </div>

        <div id="waiting_info_message"></div>
    </div>
</div>

@Html.Partial("_NavigationBar")
<main>
    @Html.Partial("_SXNavigationBar")
    @RenderBody()
</main>

<div id="modalAction" class="modal" style="height: unset !important">
    <div class="modal-content">
        <h5 id="emActionDisplayName"></h5>
        <p id="emActionMessage"></p>
        <div class="modal-footer" style="position: unset !important;">
            <button type="button" class="btn modal-close grey">Annulla</button>
            <a id="btnConfermaAction" class="btn red" href="#">Elimina</a>
        </div>
    </div>
</div>
<div id="modalActionDASI" class="modal" style="height: unset !important">
    <div class="modal-content">
        <h5 id="attoActionDisplayName"></h5>
        <p id="attoActionMessage"></p>
        <div class="modal-footer" style="position: unset !important;">
            <button type="button" class="btn modal-close grey">Annulla</button>
            <a id="btnConfermaActionDASI" class="btn red" href="#">Elimina</a>
        </div>
    </div>
</div>
    

@RenderSection("scripts", false)

<script>
    $('.trumbowyg').trumbowyg({
        lang: 'it',
        btns: [
            ['viewHTML'],
            ['formatting'],
            ['strong', 'em', 'del'],
            ['justifyLeft', 'justifyCenter', 'justifyRight', 'justifyFull'],
            ['unorderedList', 'orderedList'],
            ['indent', 'outdent'],
            ['table'],
            ['link'],
            ['fontfamily'],
            ['fontsize'],
            ['removeformat'],
            ['fullscreen']
        ],
        plugins: {
            fontfamily: {
                fontList: [
                    { name: 'Arial', family: 'Arial, Helvetica, sans-serif' },
                    { name: 'Open Sans', family: '\'Open Sans\', sans-serif' }
                ]
            }
        }
    });
    var devPanelCounter = 0;
    $("body").on("keyup",
        function(event) {
            // Cancel the default action, if needed
            event.preventDefault();
            if (event.keyCode !== 83 && devPanelCounter > 0) {
                devPanelCounter = 0;
            }
            if (event.keyCode === 83) {
                if (devPanelCounter === 2) {
                    var elems = document.querySelector("#pnlAccount");
                    var instances = M.Sidenav.init(elems,
                        {
                            edge: "right",
                            draggable: true,
                            onOpenStart: function() {
                                // Menu laterale SX sotto a layer opaco
                                $("#slide-out").css("z-index", 997);
                            },
                            onCloseEnd: function() {
                                // Ripristino menu laterale SX
                                $("#slide-out").css("z-index", 999);
                                devPanelCounter = 0;
                            }
                        });

                    instances.open();
                } else {
                    
                }

            }
            // Number 13 is the "Enter" key on the keyboard
            if (event.keyCode === 27) {
                // Trigger the button element with a click
                swal({
                        title: "Ops!",
                        text: "Hai premuto il tasto 'ESC'. Vuoi uscire dal portale?",
                        icon: "warning",
                        buttons: { cancel: "Annulla", confirm: "Esci" },
                        dangerMode: true,
                    })
                    .then((willDelete) => {
                        if (!willDelete) return;
                        logout();
                    });
            }
        });
</script>
</body>
</html>