@using Newtonsoft.Json
@using PortaleRegione.DTO.Domain
@using PortaleRegione.DTO.Enum
@using PortaleRegione.DTO.Model
@{
    var id = "";

    if (HttpContext.Current.User.Identity.IsAuthenticated)
    {
        var authCookie1 = Request.Cookies["PRCookies1"];
        var authCookie2 = Request.Cookies["PRCookies2"];
        var authCookie3 = Request.Cookies["PRCookies3"];
        if (authCookie1 != null && authCookie2 != null && authCookie3 != null)
        {
            if (!string.IsNullOrEmpty(authCookie1.Value) && !string.IsNullOrEmpty(authCookie2.Value) && !string.IsNullOrEmpty(authCookie3.Value))
            {
                var authenticationTicket1 = FormsAuthentication.Decrypt(authCookie1.Value);
                var authenticationTicket2 = FormsAuthentication.Decrypt(authCookie2.Value);
                var authenticationTicket3 = FormsAuthentication.Decrypt(authCookie3.Value);
                var data = JsonConvert.DeserializeObject<PersonaDto>(string.Format("{0}{1}{2}", authenticationTicket1.UserData, authenticationTicket2.UserData, authenticationTicket3.UserData));

                id = data.UID_persona.ToString();
            }
        }
    }
}
<div id="modalAggiungiDASI" class="modal">
    <div class="modal-content">
        <input type="hidden" id="hdTipoAttoDasi" />
        <input type="hidden" id="hdProponenteAttoDasi" value="@Html.Raw(id)"/>

        <h4 id="titleDasiModal" style="padding-bottom: 10px"></h4>
        <div class="input-field">
            <select id='modalTipoDasi'>
                <option value="@Html.Raw((int) TipoRispostaEnum.ORALE)">Orale</option>
                <option value="@Html.Raw((int) TipoRispostaEnum.SCRITTO)">Scritto</option>
                <option value="@Html.Raw((int) TipoRispostaEnum.COMMISSIONE)">Commissione</option>
            </select>
            <label for="modalTipoDasi">Tipo</label>
        </div>
        <div class="input-field" style="margin-top: 30px">
            <label for="modalOggettoDasi">Oggetto</label>
            <textarea id="modalOggettoDasi" class="materialize-textarea"></textarea>
        </div>
        <div class="input-field">
            <label for="modalTestoDasi">Testo</label>
            <textarea id="modalTestoDasi" class="materialize-textarea"></textarea>
        </div>
        <div class="input-field">
            <label for="autocompleteSoggettoDestinatarioDasi">Soggetto interrogato</label>
            <div id="autocompleteSoggettoDestinatarioDasi" class="chips chips-autocomplete"></div>
        </div>
    </div>
    <div class="modal-footer">
        <a href="#!" class="btn chip grey white-text modal-close">Annulla</a>
        <a href="#!" class="btn chip blue white-text" onclick="SalvaDasi()" style="margin-right: 15px">Salva</a>
    </div>
</div>
@{
    Html.RenderPartial("../DASI/_ScriptFormDASI");
}