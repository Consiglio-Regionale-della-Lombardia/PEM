<script>
    var instanceModalDasi;

    function SalvaDasi() {
        swal({
            title: "Procedura completata",
            text: "Atto inserito correttamente a sistema.",
            icon: "success",
            buttons: ["Ok", "Vai al riepilogo"]
        }).then((value) => {
            if (value) {
                go("/dasi");
            } else
                instanceModalDasi.close();
        });
    }

    function openFormDASI() {
        var tipo_dasi = $(this).data('tipo-dasi');
        var title = "";
        if (tipo_dasi == 1) {
            title = "Nuova interpellanza (ITL)";
        }else if (tipo_dasi == 2) {
            title = "Nuova interrogazione (ITR)";
        }else if (tipo_dasi == 3) {
            title = "Nuova interrogazione a risposta immediata (IQT)";
        }else if (tipo_dasi == 4) {
            title = "Nuova mozione (MOZ)";
        }else if (tipo_dasi == 5) {
            title = "Nuovo ordine del giorno (ODG)";
        }
        $('#titleDasiModal').text(title);
        $('select').formSelect();
        var elemAutocomplete = document.querySelector('#autocompleteSoggettoDestinatarioDasi');

        var autocompleteDataOptions = {
            data: [
                { tag: 'I Commissione permanente - Economia e Bilancio', id: '1' },
                { tag: 'II Commissione', id: '2' },
                { tag: 'III Commissione', id: '3' }
            ],
            limit: 10,
            minLength: 1
        };
        M.Chips.init(elemAutocomplete,
            {
                autocompleteOptions: autocompleteDataOptions,
                onChipAdd: function(e, chip) {
                },
                onChipSelect: function(e, chip) {
                },
                onChipDelete: function(e, chip) {
                }
            });
        var elemModal = document.querySelector("#modalAggiungiDASI");
        var options = {
            dismissible: false
        };
        instanceModalDasi = M.Modal.init(elemModal, options);
        instanceModalDasi.open();
    }
</script>