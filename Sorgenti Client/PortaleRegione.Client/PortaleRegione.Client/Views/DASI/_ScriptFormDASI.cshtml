@using PortaleRegione.DTO.Enum
<script>
    var instanceModalDasi;

    function SalvaDasi() {
        swal({
            title: "Procedura completata",
            text: "Atto inserito correttamente a sistema.",
            icon: "success",
            buttons: ["Ok", "Vai al riepilogo"]
        }).then((value) => {
            if (value) {
                go("/dasi");
            } else
                instanceModalDasi.close();
        });
    }

    function openFormDASI(tipo) {
        var tipo_dasi = tipo;
        var title = "";
        if (tipo_dasi == @Html.Raw((int)TipoAttoEnum.ITL)) {
            title = "Nuova interpellanza (ITL)";
        }else if (tipo_dasi == @Html.Raw((int)TipoAttoEnum.ITR)) {
            title = "Nuova interrogazione (ITR)";
        }else if (tipo_dasi == @Html.Raw((int)TipoAttoEnum.IQT)) {
            title = "Nuova interrogazione a risposta immediata (IQT)";
        }else if (tipo_dasi == @Html.Raw((int)TipoAttoEnum.MOZ)) {
            title = "Nuova mozione (MOZ)";
        }else if (tipo_dasi == @Html.Raw((int)TipoAttoEnum.ODG)) {
            title = "Nuovo ordine del giorno (ODG)";
        }
        $('#titleDasiModal').text(title);
        $('select').formSelect();
        var elemAutocomplete = document.querySelector('#autocompleteSoggettoDestinatarioDasi');

        var autocompleteDataOptions = {
            data: [
                { tag: 'I Commissione permanente - Economia e Bilancio', id: '1' },
                { tag: 'II Commissione', id: '2' },
                { tag: 'III Commissione', id: '3' }
            ],
            limit: 10,
            minLength: 1
        };
        M.Chips.init(elemAutocomplete,
            {
                autocompleteOptions: autocompleteDataOptions,
                onChipAdd: function(e, chip) {
                },
                onChipSelect: function(e, chip) {
                },
                onChipDelete: function(e, chip) {
                }
            });
        var elemModal = document.querySelector("#modalAggiungiDASI");
        var options = {
            dismissible: false
        };
        instanceModalDasi = M.Modal.init(elemModal, options);
        instanceModalDasi.open();
    }
</script>